@inherits LayoutComponentBase

<MudThemeProvider Theme="_theme" @bind-IsDarkMode="_isDarkMode" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1" Color="Color.Primary">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start"
                       OnClick="@ToggleDrawer" />
        <MudText Typo="Typo.h6" Class="ml-2">
            <MudIcon Icon="@Icons.Material.Filled.Home" Class="mr-1 mb-1" Style="vertical-align:middle" />
            RealEstate
        </MudText>
        <MudSpacer />
        <MudTooltip Text="@(_isDarkMode ? "Světlý režim" : "Tmavý režim")">
            <MudIconButton Icon="@(_isDarkMode ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
                           Color="Color.Inherit" OnClick="@ToggleDarkMode" />
        </MudTooltip>
    </MudAppBar>

    <MudDrawer @bind-Open="_drawerOpen" Elevation="2" Variant="@DrawerVariant.Responsive"
               ClipMode="DrawerClipMode.Always">
        <MudDrawerHeader>
            <MudText Typo="Typo.subtitle1" Class="mt-1" Color="Color.Primary">
                <b>Navigace</b>
            </MudText>
        </MudDrawerHeader>
        <NavMenu />
    </MudDrawer>

    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="pa-4">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    private bool _drawerOpen = true;
    private bool _isDarkMode = false;

    private MudTheme _theme = new MudTheme
    {
        PaletteLight = new PaletteLight
        {
            Primary           = "#1565C0",
            PrimaryContrastText = "#FFFFFF",
            Secondary         = "#FF8F00",
            SecondaryContrastText = "#FFFFFF",
            Tertiary          = "#2E7D32",
            AppbarBackground  = "#1565C0",
            AppbarText        = "#FFFFFF",
            Background        = "#F5F5F5",
            Surface           = "#FFFFFF",
            DrawerBackground  = "#FFFFFF",
            DrawerText        = "rgba(66,66,66,1)",
            Success           = "#2E7D32",
            Warning           = "#F57C00",
            Error             = "#C62828",
            Info              = "#0277BD",
            TextPrimary       = "rgba(33,33,33,1)",
            TextSecondary     = "rgba(66,66,66,0.7)",
        },
        PaletteDark = new PaletteDark
        {
            Primary           = "#42A5F5",
            PrimaryContrastText = "#000000",
            Secondary         = "#FFB74D",
            Tertiary          = "#66BB6A",
            AppbarBackground  = "#1A1A2E",
            AppbarText        = "rgba(255,255,255,0.87)",
            Background        = "#121212",
            Surface           = "#1E1E1E",
            DrawerBackground  = "#1A1A2E",
            DrawerText        = "rgba(255,255,255,0.7)",
            Success           = "#66BB6A",
            Warning           = "#FFA726",
            Error             = "#EF5350",
            Info              = "#29B6F6",
            TextPrimary       = "rgba(255,255,255,0.87)",
            TextSecondary     = "rgba(255,255,255,0.6)",
        },
        LayoutProperties = new LayoutProperties
        {
            DrawerWidthLeft = "240px",
            AppbarHeight    = "64px",
            DefaultBorderRadius = "6px",
        }
    };

    private void ToggleDrawer() => _drawerOpen = !_drawerOpen;
    private void ToggleDarkMode() => _isDarkMode = !_isDarkMode;
}
