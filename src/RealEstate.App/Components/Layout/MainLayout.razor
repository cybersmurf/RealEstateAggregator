@inherits LayoutComponentBase

<MudThemeProvider Theme="_theme" @bind-IsDarkMode="_isDarkMode" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1" Color="Color.Primary">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start"
                       OnClick="@ToggleDrawer" />
        <MudText Typo="Typo.h6" Class="ml-2">
            <MudIcon Icon="@Icons.Material.Filled.Home" Class="mr-1 mb-1" Style="vertical-align:middle" />
            RealEstate
        </MudText>
        <MudSpacer />
        <MudTooltip Text="@(_isDarkMode ? "Světlý režim" : "Tmavý režim")">
            <MudIconButton Icon="@(_isDarkMode ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
                           Color="Color.Inherit" OnClick="@ToggleDarkMode" />
        </MudTooltip>
    </MudAppBar>

    <MudDrawer @bind-Open="_drawerOpen" Elevation="2" Variant="@DrawerVariant.Responsive"
               ClipMode="DrawerClipMode.Always">
        <MudDrawerHeader>
            <MudText Typo="Typo.subtitle1" Class="mt-1" Color="Color.Primary">
                <b>Navigace</b>
            </MudText>
        </MudDrawerHeader>
        <NavMenu />
    </MudDrawer>

    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="pa-4">
            @Body
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    private bool _drawerOpen = true;
    private bool _isDarkMode = false;

    private MudTheme _theme = new MudTheme
    {
        PaletteLight = new PaletteLight
        {
            Primary          = "#C17F3E",
            PrimaryDarken    = "#9A6430",
            PrimaryLighten   = "#D4A574",
            Secondary        = "#4A6FA5",
            Tertiary         = "#6B7280",
            Success          = "#16A34A",
            Error            = "#DC2626",
            Warning          = "#D97706",
            Info             = "#0EA5E9",
            Background       = "#F9F7F4",
            Surface          = "#FFFFFF",
            DrawerBackground = "#1E293B",
            DrawerText       = "#F1F5F9",
            DrawerIcon       = "#94A3B8",
            AppbarBackground = "#1E293B",
            AppbarText       = "#F1F5F9",
            TextPrimary      = "#1E293B",
            TextSecondary    = "#64748B",
            ActionDefault    = "#94A3B8",
            TableLines       = "#E2E8F0",
            TableHover       = "#FEF9F5",
            Divider          = "#E2E8F0",
        },
        PaletteDark = new PaletteDark
        {
            Primary          = "#D4955A",
            Secondary        = "#6B93C4",
            Success          = "#22C55E",
            Error            = "#EF4444",
            Warning          = "#F59E0B",
            Info             = "#38BDF8",
            Background       = "#1A1A2E",
            Surface          = "#242438",
            DrawerBackground = "#111827",
            DrawerText       = "#E2E8F0",
            AppbarBackground = "#111827",
            AppbarText       = "#E2E8F0",
            TextPrimary      = "#E2E8F0",
            TextSecondary    = "#94A3B8",
            TableHover       = "#2D2D45",
        },
        Typography = new Typography
        {
            Default   = new DefaultTypography   { FontFamily = ["Inter", "Segoe UI", "sans-serif"] },
            H6        = new H6Typography        { FontWeight = "600" },
            Subtitle2 = new Subtitle2Typography { FontWeight = "500" },
        },
        LayoutProperties = new LayoutProperties
        {
            DrawerWidthLeft     = "220px",
            AppbarHeight        = "64px",
            DefaultBorderRadius = "8px",
        }
    };

    private void ToggleDrawer() => _drawerOpen = !_drawerOpen;
    private void ToggleDarkMode() => _isDarkMode = !_isDarkMode;
}
