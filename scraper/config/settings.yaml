# Database configuration
database:
  host: localhost        # pÅ™epsÃ¡no env DB_HOST v Docker (postgres)
  port: 5432             # pÅ™epsÃ¡no env DB_PORT
  database: realestate_dev  # pÅ™epsÃ¡no env DB_NAME
  user: postgres         # pÅ™epsÃ¡no env DB_USER
  password: dev          # pÅ™epsÃ¡no env DB_PASSWORD
  min_connections: 5
  max_connections: 20
  source_cache_ttl_seconds: 3600  # ğŸ”¥ In-memory source code cache (1 hour)

# Scraping settings
scraping:
  max_pages_per_source: 10
  request_timeout: 30
  delay_between_requests: 1.0  # seconds
  max_retries: 3
  user_agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
  respect_robots_txt: true

# Sources configuration
sources:
  - id: "00000000-0000-0000-0000-000000000001"  # Placeholder UUID
    name: "Remax"
    base_url: "https://www.remax-czech.cz"
    enabled: true
    scraper_class: "RemaxScraper"
    
  - id: "00000000-0000-0000-0000-000000000002"
    name: "MM Reality"
    base_url: "https://www.mmreality.cz"
    enabled: true
    scraper_class: "MmRealityScraper"
    
  - id: "00000000-0000-0000-0000-000000000003"
    name: "Prodejme.to"
    base_url: "https://www.prodejme.to"
    enabled: false  # MÅ¯Å¾e vyÅ¾adovat Playwright
    scraper_class: "ProdejmeToScraper"

  - id: "00000000-0000-0000-0000-000000000004"
    name: "Sreality"
    base_url: "https://www.sreality.cz"
    enabled: true
    scraper_class: "SrealityScraper"

# Scheduler configuration
scheduler:
  enabled: true
  # Cron format: minute hour day month day_of_week
  cron_schedule: "0 8,20 * * *"  # KaÅ¾dÃ½ den v 8:00 a 20:00
  timezone: "Europe/Prague"

# Logging configuration
logging:
  level: INFO
  format: "json"  # json nebo text
  file: "logs/scraper.log"
  max_file_size_mb: 100
  backup_count: 10
  
# Deactivation threshold
# PoÄet bÄ›hÅ¯, po kterÃ½ch se inzerÃ¡t oznaÄÃ­ jako neaktivnÃ­, pokud nebyl vidÄ›n
deactivation_threshold: 3
# ============================================================================
# SEARCH FILTERS - GeografickÃ© a cenovÃ© filtry
# ============================================================================
search_filters:
  # PrimÃ¡rnÃ­ region interest - Znojmo okres
  target_districts:
    - "Znojmo"        # Okres/mÄ›sto
    - "znojemsk"      # ZnojemskÃ½ okres (v URL slugÃ¡ch)
    - "jihomoravsk"   # JihomoravskÃ½ kraj (zÃ¡loha pro scrapers, kterÃ© nedÃ¡vajÃ­ okres)

  # Filtery pro domy (Houses)
  houses:
    enabled: true
    max_price: 8500000  # KÄ
    min_price: null     # null = bez minima
    offer_types:
      - "Sale"          # Prodej
      - "Rent"          # PronÃ¡jem
    
  # Filtery pro stavebnÃ­ pozemky (Land)
  land:
    enabled: true
    max_price: 2000000  # KÄ
    min_price: null
    offer_types:
      - "Sale"
    
  # Filtery pro byty (Apartments)
  apartments:
    enabled: false  # Vypnuto, pokud nechceÅ¡ byty
    max_price: null
    min_price: null
    offer_types:
      - "Sale"
      - "Rent"
    
  # Filtery pro komerÄnÃ­ nemovitosti
  commercial:
    enabled: true
    max_price: null
    min_price: null
    offer_types:
      - "Sale"
      - "Rent"

# ============================================================================
# QUALITY FILTERS - Kontrola kvality inzerÃ¡tÅ¯
# ============================================================================
quality_filters:
  # VyÅ¾aduj fotky pro inzerÃ¡t
  require_photos: false   # â† uvolnÄ›no pro vÃ½voj (REMAX photos parser se ladÃ­)
  min_photos: 1
  
  # VyÅ¾aduj cenu
  require_price: false    # â† uvolnÄ›no - ne vÅ¡echny typy majÃ­ cenu (pozemky na dotaz)
  
  # VyÅ¾aduj lokaci
  require_location: false # â† uvolnÄ›no - lokace se parsuje z URL jako zÃ¡loha
  
  # VyÅ¾aduj popis
  require_description: false  # â† vypnuto, pÅ™Ã­liÅ¡ pÅ™Ã­snÃ© pro development

# ============================================================================
# SCRAPER-SPECIFIC CONFIGURATION
# ============================================================================
scrapers:
  # MM Reality scraper search configurations
  mmreality:
    search_configs:
      - url: "https://www.mmreality.cz/nemovitosti/prodej/domy/znojmo/"
        offer_type: "Prodej"
        property_type: "DÅ¯m"
        
      - url: "https://www.mmreality.cz/nemovitosti/prodej/pozemky/znojmo/"
        offer_type: "Prodej"
        property_type: "Pozemek"
        
      # Weitere Regionen kÃ¶nnen hier hinzugefÃ¼gt werden
      # - url: "https://www.mmreality.cz/nemovitosti/prodej/domy/brno/"
      #   offer_type: "Prodej"
      #   property_type: "DÅ¯m"
  
  # SREALITY scraper configuration
  sreality:
    detail_fetch_concurrency: 5  # ğŸ”¥ Number of concurrent detail requests
    fetch_details: true
    locality_district_id: 77     # Znojmo okres (locality_district_id=77, JMK/region 14)
  min_description_length: 20  # znakÅ¯

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# SCHEDULER â€“ APScheduler naplÃ¡novanÃ© scraping Ãºlohy
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
scheduler:
  enabled: true
  timezone: Europe/Prague

  # DennÃ­ quick scraping â€“ vÅ¡echny zdroje, bez full_rescan
  # FormÃ¡t: "minuta hodina den mÄ›sÃ­c den_tÃ½dne" (cron)
  daily_cron: "0 3 * * *"      # kaÅ¾dÃ½ den ve 3:00

  # TÃ½dennÃ­ full rescan â€“ deaktivuje expired inzerÃ¡ty
  weekly_cron: "0 2 * * 0"     # kaÅ¾dou nedÄ›li ve 2:00
